
[user@BLJ-100-76-254-12 queryDate]$ sh loghistory.sh
please input path:archivelog-paycashier/2018/04/root.2018-04-27.0.log.gz
please input keyword:^C
[user@BLJ-100-76-254-12 queryDate]$ cat loghistory.sh
#!/bin/bash
read -p "please input path:" path
read -p  "please input keyword:" keyword
for i in `cat server.list`
do
echo $i
ssh -i readonly.key readonly@$i "zcat /data/logs/${path}| grep --color ${keyword} | head -n 5"
done
[user@BLJ-100-76-254-12 queryDate]$ cat server.list
100.118.2.48
100.118.2.49
100.114.1.146
100.114.1.147
100.118.2.152
100.118.2.153
100.114.1.213
100.114.1.211
100.109.15.24
100.114.1.58
100.114.1.59
100.109.80.48
100.109.80.49
100.114.1.44
100.114.1.45
100.118.2.177
100.118.2.178
100.118.2.233
100.118.2.234
100.114.1.235
100.114.1.236
100.114.5.52
100.114.5.53
100.118.2.204
100.118.2.205
100.118.2.210
100.118.2.211
100.118.2.212
100.118.2.213
100.114.5.3
100.114.5.4
100.114.5.10
100.114.5.11
100.114.5.12
100.114.5.13
100.114.1.44
100.114.1.45
100.109.80.48
100.109.80.49
100.118.3.42
100.118.3.43
100.118.3.44
100.118.3.45
100.118.3.46
100.118.3.47
100.118.3.48
100.114.5.101
100.114.5.102
100.114.5.103
100.114.5.104
100.114.5.105
100.114.5.106
100.114.5.107
100.114.1.171
100.114.1.172
100.118.2.71
100.118.2.72
100.118.2.54
100.118.2.55
100.114.1.141
100.114.1.142